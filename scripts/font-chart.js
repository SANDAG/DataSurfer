var conScroll = 210;
var font_size_tool_tip='10.5pt';
var font_size_detail_tool_tip='10.5pt';

var show_call_out=0;
var chart_fontFamily = 'Ubuntu';
var chart_fontWeight = 'normal';

var align_legend = 'right';
var vertical_align_legend = 'middle';
var layout_legend = 'vertical';

/* overview census education */
var margin_top_education = 27;
var margin_bottom_education = 27;

var chart_size_education = '62%';
var chart_size_inner_education = '0%';
/* end overview census education */

/* overview census employmentstatus*/
var margin_top_employmentstatus = 27;
//var margin_bottom_employmentstatus = 82;
var margin_bottom_employmentstatus = 50;
//var margin_left_employmentstatus = 70;
var margin_left_employmentstatus = 90;

//var margin_right_employmentstatus = 100;
var margin_right_employmentstatus = 25;
var spacing_left_employmentstatus = 28;;
var spacing_bottom_employmentstatus = 23;
//var layout_legend_employmentstatus = 'vertical';
var layout_legend_employmentstatus = 'horizontal';
var item_distance_legend_employmentstatus = 7;
var align_legend_employmentstatus = 'left';
//var align_legend_employmentstatus = align_legend;

var offset_y_title_employmentstatus = 40;
var offset_x_title_employmentstatus = 40;
var offset_x_label_employmentstatus = 15;
var y_legend_employmentstatus = 15;
var x_legend_employmentstatus = 0;
var vertical_align_legend_employmentstatus = 'bottom';
/* end overview census employmentstatus */

/* overview census transportation*/
var margin_top_transportation = 27;
//var margin_bottom_transportation = 82;
//var margin_left_transportation = 50;
var margin_bottom_transportation = 52;
var margin_left_transportation = 100;

var margin_right_transportation = 50;
//var spacing_left_transportation = 28;
var spacing_left_transportation = 15;
var spacing_bottom_transportation = 23;

var offset_y_title_transportation = 40;
var offset_x_title_transportation = 60;
//var offset_x_label_transportation = 15;
var offset_x_label_transportation = 15;
var y_legend_transportation = 15;
//var x_legend_transportation = 0;
x_legend_transportation = 15;
/* end overview census transportation */

var chart_size_ethnicity='62%';
var chart_size_inner_ethnicity='60%';
var chart_size_housing='62%';
var pie_distance = 30;
/* overview age*/
var margin_top_age = 27;
var margin_bottom_age = 82;
var margin_left_age=50; 

var margin_right_age=100;
var spacing_left_age=28;;
var spacing_bottom_age=23;

var offset_y_title_age = 40;
var offset_x_title_age = 60;
var offset_x_label_age = 15;
var y_legend_age = 15;
var x_legend_age = 0;
/* end overview */

/* overview income*/
var margin_top_income = 27;
var margin_bottom_income = 82;
var margin_left_income=59; 

var margin_right_income=100;
var spacing_left_income=28;
var spacing_bottom_income=23;

var offset_y_title_income = 45; // 40 (Thuan Apr 1)
var offset_x_title_income = 60;//45
var offset_x_label_income = 15;
var x_legend_income=0;
var y_legend_income = 0;
var y_title_income=0;
var group_padding_income = 0.17;
/* end overview */

/* overview language*/
var margin_top_language = 27;
var margin_bottom_language = 82;
var margin_left_language = 69;

var margin_right_language = 90;
var spacing_left_language = 28;
var spacing_bottom_language = 23;

var offset_y_title_language = 45; // 40 (Thuan Apr 1)
var offset_x_title_language = 60;//45
var offset_x_label_language = 15;
var x_legend_language = 0;
var y_legend_language = 0;
var y_title_language = 0;
var group_padding_language = 0.17;
/* end overview language*/

/* overview forcast ethnicity*/
var margin_top_forcast_ethnicity = 22;
var margin_bottom_forcast_ethnicity = 67;//85
var margin_left_forcast_ethnicity=54;//59

var margin_right_forcast_ethnicity=90;//100
var spacing_left_forcast_ethnicity=28;
var spacing_bottom_forcast_ethnicity=23;

var offset_y_title_forcast_ethnicity = 35;
var offset_x_title_forcast_ethnicity = 47;
var offset_x_label_forcast_ethnicity = 15;
var y_legend_forcast_ethnicity = 0;
var y_title_forcast_income = 20;
var x_legend_forcast_ethnicity = -2;
/* end overview */

/* overview forcast housing*/
var margin_top_forcast_housing = 22;
var margin_bottom_forcast_housing = 67;//85
var margin_left_forcast_housing=59;//59

var margin_right_forcast_housing=120;//130
var spacing_left_forcast_housing=28;
var spacing_bottom_forcast_housing=23;

var offset_y_title_forcast_housing = 36;
var offset_x_title_forcast_housing = 47;
var offset_x_label_forcast_housing = 15;
var y_legend_forcast_housing = 0;//15
var x_legend_forcast_housing = 0;
/* end overview */

/* overview forcast income*/
var margin_top_forcast_income = 22;
var margin_bottom_forcast_income = 75;//85
var margin_left_forcast_income=40;//59

var margin_right_forcast_income=60;//130
var spacing_left_forcast_income=28;
var spacing_bottom_forcast_income=23;

var offset_y_title_forcast_income = 23;
var offset_x_title_forcast_income = 58;
var offset_x_label_forcast_income = 15;
var y_legend_forcast_income = 0;
var x_legend_forcast_income =-34;
/* end overview */

/* overview forcast job*/
var margin_top_forcast_job = 17;
var margin_bottom_forcast_job = 75;//85
var margin_left_forcast_job=67;

var margin_right_forcast_job=130;//130
var spacing_left_forcast_job=28;
var spacing_bottom_forcast_job=23;

var offset_y_title_forcast_job = 57;
var offset_x_title_forcast_job = 50;
var offset_x_label_forcast_job = 15;
var y_legend_forcast_job = 0;
var x_legend_forcast_job = 0;
/* end overview */

/* detail census employmentstatus */
var spacing_left_detail_employmentstatus = 60;
var spacing_bottom_detail_employmentstatus = 120;
//var margin_left_detail_employmentstatus = 102; -- commented jpa
var margin_left_detail_employmentstatus = 150;
var margin_top_detail_employmentstatus = 70;
var margin_right_detail_employmentstatus = 245;
var margin_bottom_detail_employmentstatus = 95;
var offset_x_title_detail_employmentstatus = 53;
var offset_y_title_detail_employmentstatus = 60;
var y_legend_detail_employmentstatus = 40;
var x_legend_detail_employmentstatus = -124;
//var y_label_detail_employmentstatus = 28; -- commented jpa
var y_label_detail_employmentstatus = 0;
/*end detail census employmentstatus */

/* detail census transportation */
var spacing_left_detail_transportation = 60;
var spacing_bottom_detail_transportation = 120;
var margin_left_detail_transportation = 150;
var margin_top_detail_transportation = 70;
var margin_right_detail_transportation = 145;
var margin_bottom_detail_transportation = 95;
var offset_x_title_detail_transportation = 53;
var offset_y_title_detail_transportation = 60;
var y_legend_detail_transportation = 40;
var x_legend_detail_transportation = -124;
//var y_label_detail_transportation = 28;
var y_label_detail_transportation = 8;
/* end detail census employmentstatus */

/* detail age */
var spacing_left_detail_age =60;
var spacing_bottom_detail_age =120;
var margin_left_detail_age =102;
var margin_top_detail_age=70;
var margin_right_detail_age =245;
var margin_bottom_detail_age =95;
var offset_x_title_detail_age=53;
var offset_y_title_detail_age=60;
var y_legend_detail_age=40;
var x_legend_detail_age=-124;
var y_label_detail_age = 28;
//end detail age
/* detail income */
var spacing_left_detail_income =60;
var spacing_bottom_detail_income =120;
var margin_left_detail_income =102;
var margin_top_detail_income =70;
var margin_right_detail_income =245;
var margin_bottom_detail_income =105;
var offset_x_title_detail_income =68;
var offset_y_title_detail_income =60;
var y_legend_detail_income =40;
var x_legend_detail_income =-60;
var y_label_detail_income = 28;
//end detail income

/* detail language */
var spacing_left_detail_language = 60;
var spacing_bottom_detail_language = 120;
var margin_left_detail_language = 102;
var margin_top_detail_language = 70;
var margin_right_detail_language = 245;
var margin_bottom_detail_language = 105;
var offset_x_title_detail_language = 68;
var offset_y_title_detail_language = 60;
var y_legend_detail_language = 40;
//var x_legend_detail_language = -60;
var x_legend_detail_language = 0;
var y_label_detail_language = 28;
//end detail language

/* detail forcast ethnicity*/
var spacing_left_detail_forcast_ethnicity =60;
var spacing_bottom_detail_forcast_ethnicity =120;
var margin_left_detail_forcast_ethnicity =105;
var margin_top_detail_forcast_ethnicity =70;
var margin_right_detail_forcast_ethnicity =245;
var margin_bottom_detail_forcast_ethnicity =93;
var offset_x_title_detail_forcast_ethnicity =50;
var offset_y_title_detail_forcast_ethnicity =65;
var y_legend_detail_forcast_ethnicity =40;
var x_legend_detail_forcast_ethnicity =-60;
var label_x_detail_forcast_ethnicity = 26;
var label_y_detail_forcast_ethnicity = 30;
var item_margin_top_detail_forcast_ethnicity=5;
var item_margin_bottom_detail_forcast_ethnicity=5;
//end forcast ethnicity

/* detail forcast housing*/
var spacing_left_detail_forcast_housing =60;
var spacing_bottom_detail_forcast_housing =120;
var margin_left_detail_forcast_housing =102;
var margin_top_detail_forcast_housing =70;
var margin_right_detail_forcast_housing =245;
var margin_bottom_detail_forcast_housing =93;
var offset_x_title_detail_forcast_housing =50;
var offset_y_title_detail_forcast_housing =60;
var y_legend_detail_forcast_housing =40;
var x_legend_detail_forcast_housing =-80;
var label_x_detail_forcast_housing = 27;
var label_y_detail_forcast_housing = 38;
var item_margin_bottom_detail_focast_housing = 5;
var item_margin_top_detail_focast_housing = 5;
//end forcast housing

/* detail forcast income*/
var spacing_left_detail_forcast_income =60;
var spacing_bottom_detail_forcast_income =120;
var margin_left_detail_forcast_income =102;
var margin_top_detail_forcast_income =70;
var margin_right_detail_forcast_income =200;
var margin_bottom_detail_forcast_income =117;
var offset_x_title_detail_forcast_income =65;
var offset_y_title_detail_forcast_income =60;
var y_legend_detail_forcast_income =40;
var x_legend_detail_forcast_income =-97;
var label_x_detail_forcast_income = 27;
var label_y_detail_forcast_income = 38;
var item_margin_bottom_detail_focast_income = 3;
var item_margin_top_detail_focast_income = 3;
var rotation_detail_forcast_income=0;
var new_line_forcast_income=0;
//end forcast income

/* detail forcast job*/
var spacing_left_detail_forcast_job =60;
var spacing_bottom_detail_forcast_job =120;
var margin_left_detail_forcast_job =110;
var margin_top_detail_forcast_job =70;
var margin_right_detail_forcast_job =245;
var margin_bottom_detail_forcast_job =103;
var offset_x_title_detail_forcast_job =49;
var offset_y_title_detail_forcast_job =68;
var y_legend_detail_forcast_job =40;
var x_legend_detail_forcast_job =-31;
var label_x_detail_forcast_job = -16;
var label_y_detail_forcast_job = 24;
var point_width_detail_focast_job = 15;
var item_margin_bottom_detail_focast_job = 3;
var item_margin_top_detail_focast_job = 3;
//end forcast ethnicity

var item_margin_bottom = 5;
var item_margin_bottom_detail_income = 10;

var font_size_legend_income='11px';
var font_size_label_income='12px';
var point_width_income = 10;
var point_width_detail_income = 18;
var point_width_language = 30;
var point_width_detail_language = 40;
var point_width_age = 40;
var point_width_employmentstatus = 40;
var point_width_transportation = 30;

var item_margin_bottom_forcast_ethnicity = 3;
var item_margin_bottom_detail_age = 10;
var item_margin_bottom_detail_employmentstatus = 10;
var item_margin_bottom_detail_transportation = 10;

var item_margin_bottom_forcast_income = 3;

var color = "#636363";
var overview_margin = [0, 0, 0, 0];
var overview_axisLable = '9pt';
var overview_axisData = '8pt';//'8pt'
var overview_Legend = '8pt';//7pt
var overview_pie_chart_data = '9pt';

var detail_axisLable = '14pt';
var detail_axisData = '10pt';
var detail_legend = '10pt';
var detail_callout = '6.75pt';
var pie_chart_data = '8pt';
var detail_pie_chart_data = '12pt';
var detail_spacing_left = 15;
var detail_spacing_right = 15;
var detail_symbol_height = 12;
var detail_symbol_width =17;
var margin_title = 20;
var detail_margin = [0, 0, 0, 0];
var chart_detail_fontSize = '10pt';
var chart_fontSize = '10pt';
var chart_marginTop = 150;

//color education
colorEducationCensus = [];
colorEducationCensus['lessthanhighschool'] = ["#b5469a", "#d79ec7"];
//colorEducationCensus['highschoolgradincludingequivalency'] = ["#96908a", "#c3beb9"];
colorEducationCensus['highschoolgradincludingequivalency'] = ["#FAB570", "#F8D5BF"];
//colorEducationCensus['somecollegeorassociatedegree'] = ["#d2c2ac", "#e2d9cd"];
colorEducationCensus['somecollegeorassociatedegree'] = ["#16bcbc", "#89dbdb"];
//colorEducationCensus['bachelor&apos;sdegree'] = ["#087087", "#80b3bd"];
colorEducationCensus['bachelorsdegree'] = ["#087087", "#80b3bd"];
//colorEducationCensus['graduateorprofessionaldegree'] = ["#399344", "#92bd93"];
colorEducationCensus['graduateorprofessionaldegree'] = ["#B8CB77", "#CDDAA4"];
//end color education

colorEthnicityCensus = [];
colorEthnicityCensus['americanindian'] = ["#b5469a", "#d79ec7"];
colorEthnicityCensus['asian'] = ["#96908a", "#c3beb9"];
colorEthnicityCensus['black'] = ["#d2c2ac", "#e2d9cd"];
colorEthnicityCensus['hispanic'] = ["#087087", "#80b3bd"];
colorEthnicityCensus['pacificislander'] = ["#399344", "#92bd93"];
colorEthnicityCensus['twoormore'] = ["#7dc249", "#abd489"];
colorEthnicityCensus['white'] = ["#16bcbc", "#89dbdb"];
colorEthnicityCensus['other'] = ["#662f89", "#ad91bc"];

var colorEthnicityForecast = [];
colorEthnicityForecast['americanindian'] = ["#b5469a", "#d79ec7"];
colorEthnicityForecast['asian'] = ["#96908a", "#c3beb9"];
colorEthnicityForecast['black'] = ["#d2c2ac", "#e2d9cd"];
colorEthnicityForecast['hispanic'] = ["#087087", "#80b3bd"];
colorEthnicityForecast['pacificislander'] = ["#399344", "#92bd93"];
colorEthnicityForecast['twoormore'] = ["#7dc249", "#abd489"];
colorEthnicityForecast['white'] = ["#16bcbc", "#89dbdb"];
colorEthnicityForecast['other'] = ["#662f89", "#ad91bc"];

/* for chart 2 */
var colorHousingTypeCensus = [];
colorHousingTypeCensus['mobilehome'] = ["#7dc249", "#abd489"];
colorHousingTypeCensus['multifamily'] = ["#087087", "#80b3bd"];
colorHousingTypeCensus['singlefamilydetached'] = ["#16bcbc", "#89dbdb"];
colorHousingTypeCensus['singlefamilymultiple'] = ["#d2c2ac", "#e2d9cd"];
colorHousingTypeCensus['singlefamilymultipleunit'] = ["#d2c2ac", "#e2d9cd"];
colorHousingTypeCensus['vacant'] = ["#662f89", "#ad91bc"];
colorHousingTypeCensus['occupied'] = ["#b5469a", "#d79ec7"];

var colorHousingTypeForecast = [];
colorHousingTypeForecast['mobilehome'] = ["#7dc249", "#abd489"];
colorHousingTypeForecast['multifamily'] = ["#087087", "#80b3bd"];
colorHousingTypeForecast['singlefamilydetached'] = ["#16bcbc", "#89dbdb"];
colorHousingTypeForecast['singlefamilymultiple'] = ["#16bcbc", "#89dbdb"];

/* for census chart 2 */
var fontEmploymentStatusCensus = [];
fontEmploymentStatusCensus['men'] = ['#16bcbc', '#89dbdb'];
fontEmploymentStatusCensus['women'] = ['#087087', '#80b3bd'];

/* for chart 3 */
var fontAgeCensus = [];
fontAgeCensus['men'] = ['#16bcbc', '#89dbdb'];
fontAgeCensus['women'] = ['#087087', '#80b3bd'];

var fontAgeForecast = [];
fontAgeForecast['female'] = ['#087087', '#80b3bd'];
fontAgeForecast['male'] = ['#16bcbc', '#89dbdb'];

/* for chart 4 - income */
var fontIncomeCensus = [];
fontIncomeCensus['location'] = ['#087087', '#80b3bd'];
fontIncomeCensus['sandiego'] = ['#16bcbc', '#89dbdb'];

var fontIncomeForecast = [];
fontIncomeForecast['2008'] = ['#087087', '#80b3bd'];
fontIncomeForecast['2012'] = ['#087087', '#80b3bd'];
fontIncomeForecast['2015'] = ['#0f96a2', '#89cacf'];
fontIncomeForecast['2020'] = ['#16bcbc', '#89dbdb'];
fontIncomeForecast['2025'] = ['#96908a', '#c3beb9'];
fontIncomeForecast['2030'] = ['#d2c2ac', '#e2d9cd'];
fontIncomeForecast['2035'] = ['#662f89', '#ad91bc'];
fontIncomeForecast['2040'] = ['#b5469a', '#d79ec7'];
fontIncomeForecast['2045'] = ['#399344', '#92bd93'];
fontIncomeForecast['2050'] = ['#7dc249', '#abd489'];

/* for chart 4 - job chart */
var fontJobForecast = [];
fontJobForecast['businessservices'] = ['#087087', '#80b3bd'];
fontJobForecast['educationhealth'] = ['#16bcbc', '#89dbdb'];
fontJobForecast['government'] = ['#d2c2ac', '#e2d9cd'];
fontJobForecast['leisurehospitality'] = ['#96908a', '#c3beb9'];
fontJobForecast['other'] = ['#7dc249', '#abd489'];

/*for chartcensus4 - means of transportation to work chart */
var fontTransportationCensus = [];
fontTransportationCensus['means'] = ['#16bcbc', '#89dbdb'];

fontTransportationCensus['drovealone'] = ['#087087', '#80b3bd'];
fontTransportationCensus['carpooled'] = ['#16bcbc', '#89dbdb'];
fontTransportationCensus['publictransportation'] = ['#d2c2ac', '#e2d9cd'];
fontTransportationCensus['motorcycle'] = ['#96908a', '#c3beb9'];
fontTransportationCensus['bicycle'] = ['#7dc249', '#abd489'];
fontTransportationCensus['walked'] = ['#087087', '#80b3bd'];
fontTransportationCensus['othermeans'] = ['#16bcbc', '#89dbdb'];
fontTransportationCensus['workedathome'] = ['#d2c2ac', '#e2d9cd'];

/* for chartcensus5 - language spoken at home */
var fontLanguageCensus = [];
fontLanguageCensus['englishproficient'] = ['#087087', '#80b3bd'];
fontLanguageCensus['englishlimited'] = ['#16bcbc', '#89dbdb'];

function createMenu(id){
    var str1= '';
    var slt = '<select id="sltChart'+id+'">';
    slt+='<option value=""></option>';
    slt+='<option value="print">PRINT CHART</option>';
    slt+='<option value="png">DOWNLOAD CHART AS PNG</option>';
    slt+='<option value="jpeg">DOWNLOAD CHART AS JPG</option>';
    slt+='<option value="pdf">DOWNLOAD CHART AS PDF</option>';
    slt+='<option value="svg">DOWNLOAD CHART AS SVG</option>';
    slt+='</slect>';
    
    var str_ul = '<ul>'
    str_ul +='<li>'
    str_ul +='<a title="" href="javascript:void(0);" class="btn-chart" data-ajax="false"></a>'
    str_ul +='<ul class="nav-sub">'
    str_ul +='<li><a title="" id="cst_print_chart'+id+'" href="javascript:void(0);" data-ajax="false">Print chart</a></li>'
    str_ul +='<li><a title="" id="cst_down_png'+id+'" href="javascript:void(0);" data-ajax="false">DOWNLOAD CHART AS PNG</a></li>'
    str_ul +='<li><a title="" id="cst_down_jpeg'+id+'" href="javascript:void(0);" data-ajax="false">DOWNLOAD CHART AS JPG</a></li>'
    str_ul +='<li><a title="" id="cst_down_pdf'+id+'" href="javascript:void(0);" data-ajax="false">DOWNLOAD CHART AS PDF</a></li>'
    str_ul +='<li><a title="" id="cst_down_svg'+id+'" href="javascript:void(0);" data-ajax="false">DOWNLOAD CHART AS SVG</a></li>'
    str_ul +='</ul>'
    str_ul +='</li>'
    str_ul +='</ul>'
    
    str1 = '<nav id="nav-'+id+'" class="on-desktop nav-select nav-chart nav-'+id+'">';
    if(isMobile.any()){
        str1 = '<nav id="nav-'+id+'" class="on-device nav-device nav-'+id+'">';
        str1 +=slt;
        str1 +='</nav>';
        $('#chart-'+id).append(str1);
        $('#sltChart'+id).selectmenu();
        $('#sltChart'+id).selectmenu('refresh');
        $('#sltChart'+id).on('change',function(){
            if($(this).val()=='print'){
                $('#sltChart'+id +' option:first').prop('selected', true);
                var chart2 = $('#chart-'+id).highcharts();
                chart2.print();
            }else if($(this).val()=='png'){
                $('#sltChart'+id +' option:first').prop('selected', true);
                var chart2 = $('#chart-'+id).highcharts();
                chart2.exportChart();
            }else if($(this).val()=='jpeg'){
                $('#sltChart'+id +' option:first').prop('selected', true);
                var chart2 = $('#chart-'+id).highcharts();
                chart2.exportChart({type: 'image/jpeg'});
            }else if($(this).val()=='pdf'){
                $('#sltChart'+id +' option:first').prop('selected', true);
                var chart2 = $('#chart-'+id).highcharts();
                chart2.exportChart({type: 'application/pdf'});
            }else if($(this).val()=='svg'){
                $('#sltChart'+id +' option:first').prop('selected', true);
                var chart2 = $('#chart-'+id).highcharts();
                chart2.exportChart({type: 'image/svg+xml'});
            }
        });
    }else{
        str1 +=str_ul;
        str1 +='</nav>';
        $('#chart-'+id).append(str1);
    }
    
    $('#cst_print_chart'+id).on('click',function(){
        var chart2 = $('#chart-'+id).highcharts();
        chart2.print();
    })
    $('#cst_down_png'+id).on('click',function(){
        var chart2 = $('#chart-'+id).highcharts();
        chart2.exportChart();
    })
    $('#cst_down_jpeg'+id).on('click',function(){
        var chart2 = $('#chart-'+id).highcharts();
        chart2.exportChart({type: 'image/jpeg'});
    })
    $('#cst_down_pdf'+id).on('click',function(){
        var chart2 = $('#chart-'+id).highcharts();
        chart2.exportChart({type: 'application/pdf'});
    })
    $('#cst_down_svg'+id).on('click',function(){
        var chart2 = $('#chart-'+id).highcharts();
        chart2.exportChart({type: 'image/svg+xml'});
    })
}
function inprecise_round(value, decPlaces) {
  return Math.round(value*Math.pow(10,decPlaces))/Math.pow(10,decPlaces);
}

function precise_round(value, decPlaces){
    var val = value * Math.pow(10, decPlaces);
    var fraction = (Math.round((val-parseInt(val))*10)/10);

    //this line is for consistency with .NET Decimal.Round behavior
    // -342.055 => -342.06
    if(fraction == -0.5) fraction = -0.6;

    val = Math.round(parseInt(val) + fraction) / Math.pow(10, decPlaces);
    return val;
}
function shortenBigNumber2(num,decPlaces) {
    var units = ['K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'],
            decimal;

    for (var i = units.length - 1; i >= 0; i--) {
        decimal = Math.pow(1000, i + 1);
        if (num >= decimal) {
            num = parseFloat(num / decimal);
            val = precise_round(num, decPlaces)+ units[i];
            return val;
        }
    }
    if(num <100){
        return num;
    }
    num = parseFloat(num / 1000);
    val = precise_round(num, decPlaces)+ units[0];
    return val;
}
function shortenBigNumber3(num,decPlaces) {
    var units = ['K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'],
            decimal;

    for (var i = units.length - 1; i >= 0; i--) {
        decimal = Math.pow(1000, i + 1);
        if (num >= decimal) {
            num = parseFloat(num / decimal);
            val = precise_round(num, decPlaces)+ units[i];
            return val;
        }
    }
    if(num <1000){
        return num;
    }
    num = parseFloat(num / 1000);
    val = precise_round(num, decPlaces)+ units[0];
    return val;
}
function adjustGraph(chart) {
        
    try {
        if (typeof (chart === 'undefined' || chart === null) && this instanceof jQuery) { // if no obj chart and the context is set

            this.find('.detail-chart:visible').each(function () { // for only visible charts container in the curent context
                $container = $(this); // context container
                $container.find('div[id^="chart-"]').each(function () { // for only chart
                    if($(this).id!="chart-3"){
                        $chart = $(this).highcharts(); // cast from JQuery to highcharts obj
                        $chart.setSize($container.width(), $chart.chartHeight, doAnimation = false); // adjust chart size with animation transition
                    }
                });
            });
        } else {
            chart.setSize($('.detail-chart:visible').width(), chart.chartHeight, doAnimation = true); // if chart is set, adjust
        }
    } catch (err) {
        // do nothing
    }
}
function checkInternetExplorer() {
   var ua = window.navigator.userAgent;
    var msie = ua.indexOf("MSIE ");
    var rv = -1;

    if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./))      // If Internet Explorer, return version number
    {               
        if (isNaN(parseInt(ua.substring(msie + 5, ua.indexOf(".", msie))))) {
            //For IE 11 >
            if (navigator.appName == 'Netscape') {
                var ua = navigator.userAgent;
                var re = new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})");
                if (re.exec(ua) != null) {
                    rv = parseFloat(RegExp.$1);
                    return true
                }
            }
            else {
                return false;
            }
        }
        else {
            //For < IE11
            return true;
        }
        return false;
    }
}
function capitalize (text) {
    return text.charAt(0).toUpperCase() + text.slice(1).toLowerCase();
}
function sortByProperty(property) {
    'use strict';
    return function (a, b) {
        var sortStatus = 0;
        if (a[property] < b[property]) {
            sortStatus = -1;
        } else if (a[property] > b[property]) {
            sortStatus = 1;
        }
 
        return sortStatus;
    };
}
function newSortByProperty(property) {
    'use strict';
    return function (a, b) {
        var sortStatus = 0;
        if (a[property] > b[property]) {
            sortStatus = -1;
        } else if (a[property] < b[property]) {
            sortStatus = 1;
        }
 
        return sortStatus;
    };
}
function loadCurrentData(){
    var source_type = $('#pck_source_type').val();
    var pck_year = $('#pck_year').val();
    var pck_geography_type = $('#pck_geography_type').val();
    var pck_location = $('#pck_location').val();
    var url = api_url;
    if($('#slt_year').length > 0 || $('#txtYear').length >0){
        $.ajax({
            url:url,
            type:"POST",
            dataType:"json",
            data:{source_type:source_type},
            success: function (res) {
                if(res.length > 0){
                    var arrTemp = [];
                    for(var i=0;i<res.length;i++){
                        var obj = res[i];
                        for(var key in obj)
                          arrTemp.push(obj[key]);
                    }
                    arrTemp.sort(function(a, b){return b-a});
                    for(var i=0;i<arrTemp.length;i++){
                        if(!isMobile.any()){
                            $('#slt_year').append($('<option>', {value: arrTemp[i], text: source_type === 'forecast'?'Series '+arrTemp[i]:arrTemp[i]}));
                        }else{
                            $('#txtYear').append($('<option>', {value: arrTemp[i], text: source_type === 'forecast'?'Series '+arrTemp[i]:arrTemp[i]}));
                        }
                    }
                }
                if($('#slt_year').length > 0){
                    if(!isMobile.any()){
                        $('#slt_year').prop('disabled', false);
                        $('#slt_source_type').val(source_type).prop('selected', true);
                        $('#slt_source_type').selectpicker('refresh');

                        $('#slt_year').val(pck_year).prop('selected', true);
                        $('#slt_year').selectpicker('refresh');
                    }else{
                        if($('#txtYear').length >0){
                            $('#txtType').val(source_type).prop('selected', true);
                            $('#txtType').selectmenu('refresh');

                            $('#txtYear').selectmenu('enable');
                            $('#txtYear').val(pck_year).prop('selected', true);
                            $('#txtYear').selectmenu('refresh');
                        }
                    }
                    
                }
                
            },
            error: function (request, status, error) {
                console.log('Error call api');
            }
        });
    }
    if($('#slt_geography_type').length >0 || $('#txtGeography').length >0){
        $.ajax({
            url:url,
            type:"POST",
            dataType:"json",
            data:{source_type:source_type,year:pck_year},
            success: function (res) {
                if(res.length > 0){
                    $('#slt_geography_type').find('option:not(:first)').remove();
                    var arrTemp = [];
                    for(var i=0;i<res.length;i++){
                        var obj = res[i];
                        for(var key in obj){
                            arrTemp.push(obj[key]);
                        }
                    }
                    arrTemp.sort();
                    for(var i=0;i<arrTemp.length;i++){
                        if(!isMobile.any()){
                            $('#slt_geography_type').append($('<option>', {value: arrTemp[i], text: arrTemp[i]}));
                        }else{
                            $('#txtGeography').append($('<option>', {value: arrTemp[i], text: arrTemp[i]}));
                        }
                    }
                    if(!isMobile.any()){
                        if($('#slt_geography_type').length >0){
                            $('#slt_geography_type').val(pck_geography_type).prop('selected', true);
                            $('#slt_geography_type').prop('disabled', false);
                            $('#slt_geography_type').selectpicker('refresh');
                        }
                    }else{
                        if($('#txtGeography').length >0){
                            $('#txtGeography').selectmenu('enable');
                            $('#txtGeography').val(pck_geography_type).prop('selected', true);
                            $('#txtGeography').selectmenu('refresh');
                        }
                    }

                }
            },
            error: function (request, status, error) {
                console.log('Error call api');
            }
        });
    }
    if($('#slt_location').length > 0){
        $.ajax({
            url:url,
            type:"POST",
            dataType:"json",
            data:{source_type:source_type,year:pck_year,geography_type:pck_geography_type},
            success: function (res) {
                if(res.length > 0){
                    $('#slt_location').find('option:not(:first)').remove();
                    var arrTemp = [];
                    for(var i=0;i<res.length;i++){
                        var obj = res[i];
                        for(var key in obj){
                            arrTemp.push(obj[key]);
                        }
                    }
                    arrTemp.sort();
                    for(var i=0;i<arrTemp.length;i++){
                        if(!isMobile.any()){
                            $('#slt_location').append($('<option>', {value: arrTemp[i], text: arrTemp[i]}));
                        }else{
                            $('#txtLocation').append($('<option>', {value: arrTemp[i], text: arrTemp[i]}));
                        }
                    }
                    if(!isMobile.any()){
                        if($('#slt_location').length > 0){
                            $('#slt_location').prop('disabled',false);
                            $('#slt_location').val(pck_location).prop('selected', true);
                            $('#slt_location').selectpicker('refresh');
                        }
                    }else{
                        $('#txtLocation').selectmenu('enable');
                        $('#txtLocation').val(pck_location).prop('selected', true);
                        $('#txtLocation').selectmenu('refresh');
                    } 
                }
            },
            error: function (request, status, error) {
                console.log('Error call api');
            }
        });
    }
}
var init_width = $(window).width();
$(window).resize(function () {
    var window_width = $(window).width();
    if(window_width > 0 && window_width <768){
        loadMiniSize();
    }else if(window_width >= 768 && window_width < 1024){
        loadAvgSize();
    }else if(window_width >=1024){
        loadMaxSize();
    }
    var pck_source_type = $('#pck_source_type').val();
    var b = $('body');
    var index_b = b.children().length-1;
    var c_b = b.children();
    var objLast = c_b[index_b];
    
    if(!isMobile.any()){
        if(objLast.className!="highcharts-container"){//!=highcharts-container
            if (pck_source_type == "forecast") {
                reChartForecast1();
                reChartForecast2();
                reChartForecast4();
                reChartForecast5();
            } else if (pck_source_type == "census") {
                reChartCensus1();
                reChartCensus2();
                reChartCensus4();
                reChartCensus5();
            }else{
                reChart1();
                reChart2();
                reChart4();
                reChart5();
            }
        }
    }else{
        if(init_width!=$(window).width()){
            init_width = $(window).width();
            window_width = $(window).width()
            if (pck_source_type == "forecast") {
                reChartForecast1();
                reChartForecast2();
                reChartForecast4();
                reChartForecast5();
            } else if (pck_source_type == "census") {
                reChartCensus1();
                reChartCensus2();
                reChartCensus4();
                reChartCensus5();
            }else{
                reChart1();
                reChart2();
                reChart4();
                reChart5();
            }
        }
    }
});
